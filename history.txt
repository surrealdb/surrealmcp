#V2
        DEFINE TABLE IF NOT EXISTS script_registry SCHEMAFULL;
        DEFINE FIELD IF NOT EXISTS path ON script_registry TYPE string;
        DEFINE FIELD IF NOT EXISTS purpose ON script_registry TYPE string;
        DEFINE FIELD IF NOT EXISTS permissions ON script_registry TYPE string;
        DEFINE FIELD IF NOT EXISTS created_at ON script_registry TYPE datetime;
        DEFINE FIELD IF NOT EXISTS session_id ON script_registry TYPE string;
        DEFINE FIELD IF NOT EXISTS cleaned_up ON script_registry TYPE bool DEFAULT false;
        DEFINE FIELD IF NOT EXISTS cleanup_at ON script_registry TYPE option<datetime>;
        DEFINE FIELD IF NOT EXISTS command_hash ON script_registry TYPE option<string>;
        DEFINE INDEX IF NOT EXISTS idx_session ON script_registry FIELDS session_id;
        DEFINE INDEX IF NOT EXISTS idx_created ON script_registry FIELDS created_at;
        
SELECT * FROM script_registry WHERE session_id = 'unknown' AND cleaned_up = false ORDER BY created_at DESC;
                UPDATE script_registry SET cleaned_up = true, cleanup_at = time::now()
